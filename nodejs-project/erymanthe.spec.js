let exercice = require('./erymanthe.js');
let assert = require('assert');


let tests = createTests();
let success = 0;
tests.forEach(function(test) {
  if(exercice.sanglierErymanthe.apply(null, test.values) === test.answer){
    printMessage('Success', '✓ '+test.name+' succed');
    success++;
  }
  else{
    printMessage('Error', 'X '+test.name+' failed');
  }
}, this);


try {
  assert.equal(success, tests.length);
  printMessage('Standard Output', 'C\'est une réussite ! ');
  success++;
} catch (error) {
  printMessage('Standard Output💡', 'Encore un petit effort.🤔');
  console.log('\nTECHIO> success false')
  console.error("Tous les tests ne sont pas justes !");
}


function createTests() {
  let tests = [
    {
      name:"Test 0",
      values:[0,50,40,100,70,90,0],
      answer:sanglierErymantheAnswer([0,50,40,100,70,90,0])
    },
    {
      name:"Test 1",
      values:[0,70,80,30,10,120,150,40,110,130,150,40,100,30,80,90,0],
      answer:sanglierErymantheAnswer([0,70,80,30,10,120,150,40,110,130,150,40,100,30,80,90,0])
    },
    {
      name:"Test 2",
      values:[0,190,110,70,110,40,150,100,130,110,140,110,130,130,170,140,190,50,170,190,160,110,30,60,40,170,100,140,200,180,30,180,160,130,40,60,160,190,150,90,90,90,200,20,10,160,150,200,200,120,190,160,20,10,10,60,170,110,190,170,80,10,140,30,130,180,90,90,170,30,180,60,110,170,70,120,130,20,120,130,130,100,80,150,100,90,0],
      answer:sanglierErymantheAnswer([0,190,110,70,110,40,150,100,130,110,140,110,130,130,170,140,190,50,170,190,160,110,30,60,40,170,100,140,200,180,30,180,160,130,40,60,160,190,150,90,90,90,200,20,10,160,150,200,200,120,190,160,20,10,10,60,170,110,190,170,80,10,140,30,130,180,90,90,170,30,180,60,110,170,70,120,130,20,120,130,130,100,80,150,100,90,0])
    },
    {
      name:"Test 3",
      values:[0,70,200,180,30,70,190,170,100,120,150,180,200,120,10,180,170,120,150,40,40,70,50,150,200,180,40,80,120,140,160,110,10,160,90,40,20,70,10,120,190,150,100,180,70,110,160,30,20,100,60,50,170,110,190,160,80,30,30,190,170,190,100,170,140,180,10,160,50,10,70,40,160,170,20,20,70,170,50,80,70,110,130,30,10,120,190,80,150,20,70,0],
      answer:sanglierErymantheAnswer([0,70,200,180,30,70,190,170,100,120,150,180,200,120,10,180,170,120,150,40,40,70,50,150,200,180,40,80,120,140,160,110,10,160,90,40,20,70,10,120,190,150,100,180,70,110,160,30,20,100,60,50,170,110,190,160,80,30,30,190,170,190,100,170,140,180,10,160,50,10,70,40,160,170,20,20,70,170,50,80,70,110,130,30,10,120,190,80,150,20,70,0])
    },
    {
      name:"Test 4",
      values:[0,10,160,80,140,140,80,100,190,80,170,20,40,130,30,50,190,200,90,70,60,190,200,90,200,120,70,80,60,80,150,170,80,110,40,20,40,110,110,30,190,70,50,20,200,80,70,190,80,160,60,130,150,50,0],
      answer:sanglierErymantheAnswer([0,10,160,80,140,140,80,100,190,80,170,20,40,130,30,50,190,200,90,70,60,190,200,90,200,120,70,80,60,80,150,170,80,110,40,20,40,110,110,30,190,70,50,20,200,80,70,190,80,160,60,130,150,50,0])
    },
    {
      name:"Test 5",
      values:[0,140,170,80,20,20,150,160,180,30,60,20,50,100,0],
      answer:sanglierErymantheAnswer([0,140,170,80,20,20,150,160,180,30,60,20,50,100,0])
    },
    {
      name:"Test 6",
      values:[0,160,120,110,20,170,130,20,50,190,200,120,140,50,40,80,100,50,20,60,120,30,80,70,180,50,90,40,70,140,130,190,90,50,90,110,10,20,120,50,200,110,170,140,160,200,20,50,50,40,110,160,60,180,20,40,30,110,70,90,0],
      answer:sanglierErymantheAnswer([0,160,120,110,20,170,130,20,50,190,200,120,140,50,40,80,100,50,20,60,120,30,80,70,180,50,90,40,70,140,130,190,90,50,90,110,10,20,120,50,200,110,170,140,160,200,20,50,50,40,110,160,60,180,20,40,30,110,70,90,0])
    },
    {
      name:"Test 7",
      values:[0,200,80,130,40,160,30,50,180,140,100,180,50,60,110,200,60,130,50,100,160,150,60,20,130,70,50,150,0],
      answer:sanglierErymantheAnswer([0,200,80,130,40,160,30,50,180,140,100,180,50,60,110,200,60,130,50,100,160,150,60,20,130,70,50,150,0])
    }
  ]

  return tests;
}

function sanglierErymantheAnswer(montagnes)
{
  let n_pierres = 0;
  for(let i=0 ; i < montagnes.length-1; i++)
  {
    let diff = montagnes[i] - montagnes[i+1];
    if(diff>0)
    {
      n_pierres += (diff/10) + 1;
    }
  }
  return n_pierres;
}

function printMessage(channel, message) {
  console.log('\nTECHIO> message --channel "' + channel + '" "' + message + '"');
}
